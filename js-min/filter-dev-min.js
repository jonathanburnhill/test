const canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),imgSelect=document.querySelector("#img-select"),filePicker=document.querySelector("#file-picker"),noFile=document.querySelector("#no-file"),hideBtns=document.querySelector(".hide-btns");imgSelect.addEventListener("click",function(e){filePicker&&filePicker.click(),e.preventDefault()},!1);const chooseImg=e=>{const n=new FileReader;n.onload=function(e){const n=new Image;n.addEventListener("load",function(){let e,t;noFile.innerHTML="",hideBtns.style.visibility="visible";const i=n.width/n.height,a=canvas.width/canvas.height;getWidthFirst(scaleMode,i,a)?t=(e=canvas.width)/i:e=(t=canvas.height)*i,ctx.drawImage(n,0,0,n.width,n.height,0,0,canvas.width,canvas.height,(canvas.width-e)/2,(canvas.height-t)/2,e,t)}),n.src=e.target.result},n.readAsDataURL(event.target.files[0])};let scaleMode="showAll";function onImageLoad(){}function getWidthFirst(e,n,t){return"showAll"===e?n>t:n<t}document.querySelector("#file-picker").addEventListener("change",chooseImg,!1);const img=new Image,applyFilter=e=>document.querySelector(e);applyFilter("#greyscale").addEventListener("click",function(e){Caman("#canvas",img,function(){this.greyscale().render()})}),applyFilter("#vintage").addEventListener("click",function(){Caman("#canvas",img,function(){this.vintage(400).render()})}),applyFilter("#oldboot").addEventListener("click",function(e){Caman("#canvas",img,function(){this.oldBoot().render()})}),applyFilter("#orange-peel").addEventListener("click",function(){Caman("#canvas",img,function(){this.orangePeel().render()})}),applyFilter("#love").addEventListener("click",function(){Caman("#canvas",img,function(){this.love().render()})}),applyFilter("#sunrise").addEventListener("click",function(){Caman("#canvas",img,function(){this.sunrise().render()})}),applyFilter("#hazydays").addEventListener("click",function(){Caman("#canvas",img,function(){this.hazyDays().render()})}),applyFilter("#reset").addEventListener("click",function(e){Caman("#canvas",img,function(){this.reloadCanvasData(),this.revert(!1),this.render()})});